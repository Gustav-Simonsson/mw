<div class=main>

  <h3>Prepartion</h3>

  <script type="text/javascript" src="../bitcoinjs/crypto-js/crypto.js"></script>
  <script type="text/javascript" src="../bitcoinjs/crypto-js/sha256.js"></script>
  <script type="text/javascript" src="../bitcoinjs/crypto-js/ripemd160.js"></script>
  <script type="text/javascript" src="../bitcoinjs/jsbn/prng4.js"></script>
  <script type="text/javascript" src="../bitcoinjs/jsbn/rng.js"></script>
  <script type="text/javascript" src="../bitcoinjs/jsbn/jsbn.js"></script>
  <script type="text/javascript" src="../bitcoinjs/jsbn/jsbn2.js"></script>

  <script type="text/javascript" src="../bitcoinjs/jsbn/ec.js"></script>
  <script type="text/javascript" src="../bitcoinjs/jsbn/sec.js"></script>
  <script type="text/javascript" src="../bitcoinjs/events/eventemitter.js"></script>
  <script type="text/javascript" src="../bitcoinjs/bitcoin.js"></script>
  <script type="text/javascript" src="../bitcoinjs/util.js"></script>
  <script type="text/javascript" src="../bitcoinjs/base58.js"></script>

  <script type="text/javascript" src="../bitcoinjs/address.js"></script>
  <script type="text/javascript" src="../bitcoinjs/ecdsa.js"></script>
  <script type="text/javascript" src="../bitcoinjs/eckey.js"></script>
  <script type="text/javascript" src="../bitcoinjs/paillier.js"></script>

  <script type="text/javascript" src="../bitcoinjs/paillier.js"></script>

  <p><b>Please copy this addresses and its private key and keep them handy:</b></p>

  <p><b>Your Bet Address:</b></p>
  <p id=ECpub><font color=red>[An address should appear here.]</font></p>

  <p><b>Its Private Key:</b></p>
  <p id=ECpriv><font color=red>[A key should appear here.]</font></p>

  <p id=ok><font color=red>[An ok message should appear here.]</font></p>

  <hr>

  <script>
  
    // Test scripts with basic signing functions
    // -----------------------------------------

    // init    
    console.log(ok = "init.");
  
    // create an eliptic key pair
    console.log("create eliptic key");
    var ec = new Bitcoin.ECKey();
    ec.setCompressed(true);
    var ec58 = Bitcoin.Base58.encode(ec.priv.toByteArrayUnsigned());
    var ecExp = ec.getExportedPrivateKey();
    console.log("EC priv key (hex): " + ec.toString());
    console.log("EC priv key (base58): " + ec58);
    console.log("EC priv key (exported): " + ecExp);

    // Print priv key to screen
    var ECtag = document.getElementById("ECpriv");
    if(ECtag) ECtag.innerHTML = "<font color=blue>" + ec58 + "</font>";

    // Same with pub part, print it
    var ecPub = new BigInteger(ec.getPub()); // fills this.pub
    var ecPub58 = Bitcoin.Base58.encode(ecPub.toByteArrayUnsigned());
    console.log("EC pub key (hex): " + Crypto.util.bytesToHex(ec.getPub()));
    console.log("EC pub key (base58): " + ecPub58);

    // Print pub key to screen
    var ECtag = document.getElementById("ECpub");
    if(ECtag) ECtag.innerHTML = "<font color=blue>" + ecPub58 + "</font>";
    
    // Address
    // -------
    // for checks at http://brainwallet.org/#sign:
    // ec.setCompressed(false);
    var addr = ec.getBitcoinAddress();
    console.log("address: " + addr);
    
    // Print address to screen
    var ECtag = document.getElementById("addr");
    if(ECtag) ECtag.innerHTML = "<font color=blue>" + addr + "</font>";
        
    // Print an ok to screen and JS console.
    console.log(ok = "ok.");
    var oktag = document.getElementById("ok");
    if(oktag) oktag.innerHTML = "<font color=lime>" + ok + "</font>";

  </script>

  <h4>Instructions</h4>
  <p>
    <ll>
      <li> Please send $AMOUNT to <span id=Addr><font color=red>[An address should appear here.]</font></span></li>
      <li> Reload this page to see if the transaction has been mined. </li>
    </ll>  
  </p>

  <p>
    <a href=pend.html>continue</a>
  </p>


  <hr />


  <h4>Notes</h4>
  <p>
    <ll>
      <li> 
        This step makes things technically simpler for us as the actual
        betting contract can then use a single input.
      </li>
    </ll>
  </p>

  <p>
    <a href=pend.html>continue</a>
  </p>

</div>
